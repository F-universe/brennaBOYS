<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>🚀 Space Survival Futuristico 🚀</title>
  <style>
    body {
      margin: 0;
      font-family: 'Orbitron', sans-serif;
      overflow: hidden;
      background: black;
      color: #f0f0f0;
    }

    #background {
      position: fixed;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      background: radial-gradient(circle at center, #050510, #000);
      z-index: -1;
    }

    .star {
      position: absolute;
      width: 2px;
      height: 2px;
      background: white;
      opacity: 0.8;
      animation: starFall linear infinite;
    }

    @keyframes starFall {
      from { transform: translateY(0); }
      to { transform: translateY(100vh); }
    }

    h1 {
      text-align: center;
      color: #00eaff;
      text-shadow: 0 0 15px #00c6ff, 0 0 30px #0072ff;
      margin: 5px 0;
      font-size: 1.2em;
    }

    #gameArea {
      position: relative;
      width: 100%;
      height: 100vh;
      overflow: hidden;
    }

    #player {
      position: absolute;
      bottom: 80px;
      left: 50%;
      transform: translateX(-50%);
      width: 35px;
      height: 35px;
      background: linear-gradient(135deg, #00eaff, #0072ff);
      border-radius: 6px;
      box-shadow: 0 0 15px #00eaff, 0 0 30px #0072ff;
    }

    .bullet {
      position: absolute;
      width: 6px;
      height: 14px;
      background: #ff0;
      border-radius: 3px;
      box-shadow: 0 0 12px #ff0, 0 0 25px #ffaa00;
    }

    .meteor {
      position: absolute;
      width: 30px;
      height: 30px;
      background: radial-gradient(circle, #ff6600, #aa0000);
      border-radius: 50%;
      box-shadow: 0 0 15px #ff3300, 0 0 25px #ff6600;
    }

    .powerup {
      position: absolute;
      width: 22px;
      height: 22px;
      border-radius: 50%;
      text-align: center;
      line-height: 22px;
      font-size: 12px;
      font-weight: bold;
      color: #000;
      animation: pulse 1.5s infinite alternate;
    }

    .life { background: #00ff88; box-shadow: 0 0 12px #00ff88; }
    .energy { background: #ff0; box-shadow: 0 0 12px #ffaa00; }
    .shield { background: #00eaff; box-shadow: 0 0 12px #00eaff; }

    @keyframes pulse {
      from { transform: scale(1); opacity: 0.7; }
      to { transform: scale(1.3); opacity: 1; }
    }

    #hud {
      position: absolute;
      top: 5px;
      width: 100%;
      display: flex;
      justify-content: space-around;
      font-size: 0.9em;
    }

    #score { color: #ffeb3b; }
    #lives { color: #ff4444; }
    #energy { color: #00ff88; }
    #level { color: #00eaff; }

    #gameOver {
      display: none;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 2em;
      color: #ff4444;
      text-shadow: 0 0 25px #ff0000;
    }

    #restartBtn {
      display: none;
      position: absolute;
      top: 65%;
      left: 50%;
      transform: translateX(-50%);
      padding: 10px 20px;
      background: #00eaff;
      border: none;
      border-radius: 8px;
      font-size: 1em;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 0 15px #00eaff;
    }
  </style>
</head>
<body>
  <div id="background"></div>
  <h1>🚀 Space Survival Futuristico 🚀</h1>
  <div id="gameArea">
    <div id="player"></div>

    <div id="hud">
      <div id="score">Score: 0</div>
      <div id="lives">Lives: 3</div>
      <div id="energy">Energy: 100</div>
      <div id="level">Level: 1</div>
    </div>

    <div id="gameOver">💥 GAME OVER 💥</div>
    <button id="restartBtn">Restart</button>
  </div>

  <script>
    const gameArea = document.getElementById("gameArea");
    const player = document.getElementById("player");
    const scoreDisplay = document.getElementById("score");
    const livesDisplay = document.getElementById("lives");
    const energyDisplay = document.getElementById("energy");
    const levelDisplay = document.getElementById("level");
    const gameOverText = document.getElementById("gameOver");
    const restartBtn = document.getElementById("restartBtn");

    let playerX = gameArea.clientWidth / 2 - 15;
    let score = 0;
    let lives = 3;
    let energy = 100;
    let level = 1;
    let gameRunning = true;

    let bullets = [];
    let meteors = [];
    let powerups = [];
    let keys = {};

    let meteorSpeed = 2;

    document.addEventListener("keydown", e => { keys[e.key] = true; });
    document.addEventListener("keyup", e => { keys[e.key] = false; });

    function movePlayer(offset) {
      playerX += offset;
      if (playerX < 0) playerX = 0;
      if (playerX > gameArea.clientWidth - player.offsetWidth)
        playerX = gameArea.clientWidth - player.offsetWidth;
      player.style.left = playerX + "px";
    }

    function shoot() {
      const bullet = document.createElement("div");
      bullet.classList.add("bullet");
      bullet.style.left = playerX + player.offsetWidth/2 - 3 + "px";
      bullet.style.top = player.offsetTop - 15 + "px";
      gameArea.appendChild(bullet);
      bullets.push(bullet);
    }

    function spawnMeteor() {
      if (!gameRunning) return;
      const m = document.createElement("div");
      m.classList.add("meteor");
      m.style.left = Math.random() * (gameArea.clientWidth - 30) + "px";
      m.style.top = "-30px";
      gameArea.appendChild(m);
      meteors.push(m);
    }

    function spawnPowerup() {
      if (!gameRunning) return;
      const p = document.createElement("div");
      p.classList.add("powerup");
      let type = Math.random();
      if (type < 0.33) { p.classList.add("life"); p.textContent = "❤"; }
      else if (type < 0.66) { p.classList.add("energy"); p.textContent = "⚡"; }
      else { p.classList.add("shield"); p.textContent = "🛡"; }
      p.style.left = Math.random() * (gameArea.clientWidth - 20) + "px";
      p.style.top = "-20px";
      gameArea.appendChild(p);
      powerups.push(p);
    }

    function updateHUD() {
      scoreDisplay.textContent = "Score: " + score;
      livesDisplay.textContent = "Lives: " + lives;
      energyDisplay.textContent = "Energy: " + energy;
      levelDisplay.textContent = "Level: " + level;
    }

    function gameLoop() {
      if (!gameRunning) return;

      if (keys["ArrowLeft"]) movePlayer(-5);
      if (keys["ArrowRight"]) movePlayer(5);
      if (keys[" "]) shoot();

      // Bullets
      bullets.forEach((b, i) => {
        b.style.top = b.offsetTop - 6 + "px";
        if (b.offsetTop < 0) { b.remove(); bullets.splice(i,1); }
      });

      // Meteors
      meteors.forEach((m, i) => {
        m.style.top = m.offsetTop + meteorSpeed + "px";
        if (m.offsetTop > gameArea.clientHeight) {
          m.remove(); meteors.splice(i,1);
          energy -= 25; // perde energia se meteorite cade
          if (energy <= 0) {
            lives--; energy = 100;
          }
          if (lives <= 0) endGame();
          updateHUD();
        }
      });

      // Powerups
      powerups.forEach((p, i) => {
        p.style.top = p.offsetTop + 2 + "px";
        if (p.offsetTop > gameArea.clientHeight) {
          p.remove(); powerups.splice(i,1);
        }
      });

      checkCollisions();
      requestAnimationFrame(gameLoop);
    }

    function checkCollisions() {
      const playerRect = player.getBoundingClientRect();

      // Bullet vs Meteor
      bullets.forEach((b, bi) => {
        const bRect = b.getBoundingClientRect();
        meteors.forEach((m, mi) => {
          const mRect = m.getBoundingClientRect();
          if (bRect.bottom > mRect.top && bRect.top < mRect.bottom &&
              bRect.right > mRect.left && bRect.left < mRect.right) {
            score += 10;
            updateHUD();
            b.remove(); bullets.splice(bi,1);
            m.remove(); meteors.splice(mi,1);
          }
        });
      });

      // Meteor vs Player
      meteors.forEach((m, i) => {
        const mRect = m.getBoundingClientRect();
        if (playerRect.bottom > mRect.top && playerRect.top < mRect.bottom &&
            playerRect.right > mRect.left && playerRect.left < mRect.right) {
          energy -= 50;
          if (energy <= 0) { lives--; energy = 100; }
          if (lives <= 0) endGame();
          updateHUD();
          m.remove(); meteors.splice(i,1);
        }
      });

      // Powerup vs Player
      powerups.forEach((p, i) => {
        const pRect = p.getBoundingClientRect();
        if (playerRect.bottom > pRect.top && playerRect.top < pRect.bottom &&
            playerRect.right > pRect.left && playerRect.left < pRect.right) {
          if (p.classList.contains("life")) lives++;
          if (p.classList.contains("energy")) energy = 100;
          if (p.classList.contains("shield")) energy += 50;
          updateHUD();
          p.remove(); powerups.splice(i,1);
        }
      });
    }

    function endGame() {
      gameRunning = false;
      gameOverText.style.display = "block";
      restartBtn.style.display = "block";
    }

    restartBtn.addEventListener("click", () => { location.reload(); });

    // Spawn meteors e powerups
    setInterval(() => { if (gameRunning) spawnMeteor(); }, 1200);
    setInterval(() => { if (gameRunning && Math.random()<0.3) spawnPowerup(); }, 10000);
    setInterval(() => { if (gameRunning) { level++; meteorSpeed+=0.5; updateHUD(); } }, 30000);

    function createStars() {
      for (let i=0;i<50;i++) {
        const star = document.createElement("div");
        star.classList.add("star");
        star.style.left = Math.random()*window.innerWidth + "px";
        star.style.top = Math.random()*window.innerHeight + "px";
        star.style.animationDuration = 5 + Math.random()*10 + "s";
        document.getElementById("background").appendChild(star);
      }
    }

    createStars();
    updateHUD();
    gameLoop();
  </script>
</body>
</html>
